"use strict";!function(e){var t=e(".js-btn-user-deactivate"),a=e(".js-btn-user-reactivate"),n=e(".js-btn-user-signtos"),s=function(){["National Council","National","Canberra and Goulburn","New South Wales","Northern Territory","Queensland","South Australia","Tasmania","Victoria","Western Australia"].forEach(function(t){e("#dioceses").find("li").each(function(){e(this).is("[title='"+t+"']")&&e(this).css("background-color","#00ffff")})})},o=function(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()",t="",a=0,n=e.length;a<16;++a)t+=e.charAt(Math.floor(Math.random()*n));return t};e(document).ready(function(){if(e(".js-toggle-password").on("click",function(){var t=e(this),a=e(t.data("target"));t.find(".fa").hasClass("fa-eye")?(a.attr("type","text"),t.find(".fa").removeClass("fa-eye").addClass("fa-eye-slash")):(a.attr("type","password"),t.find(".fa").removeClass("fa-eye-slash").addClass("fa-eye"))}),e(".js-generate-password").on("click",function(t){t.preventDefault();var a=o(),n=e(e(this).data("target"));n.val(a).change(),"password"===n.attr("type")&&e(".js-toggle-password").click()}),t.on("click",function(a){a.preventDefault();var n="<p>Are you sure you want to deactivate "+e("#first_name").val()+" "+e("#last_name").val()+"?</p>";showDialog(n,!0,function(){var a={user:t.data("user-id")};t.text(t.data("text-progress")),e.post("/users/deactivate",a,function(e){showAlert(e.msg,"success"),updateUpdatedBy(),setTimeout(function(){window.location.reload()},1e3)}).fail(function(e){var t=JSON.parse(e.responseText);showAlert(t.msg,"danger")}).always(function(){t.text(t.data("text-default"))})})}),a.on("click",function(t){t.preventDefault();var n="<p>Are you sure you want to reactivate "+e("#first_name").val()+" "+e("#last_name").val()+"?</p>";showDialog(n,!0,function(){var t={user:a.data("user-id")};a.text(a.data("text-progress")),e.post("/users/reactivate",t,function(e){showAlert(e.msg,"success"),updateUpdatedBy(),setTimeout(function(){window.location.reload()},1e3)}).fail(function(e){var t=JSON.parse(e.responseText);showAlert(t.msg,"danger")}).always(function(){a.text(a.data("text-default"))})})}),n.on("click",function(t){t.preventDefault();var a="<p>Are you sure you want to ask "+e("#first_name").val()+" "+e("#last_name").val()+" to re-sign Term of Use ?</p>";showDialog(a,!0,function(){var t={user:n.data("user-id")};n.text(n.data("text-progress")),e.post("/users/signtos",t,function(e){showAlert(e.msg,"success"),updateUpdatedBy(),setTimeout(function(){window.location.reload()},1e3)}).fail(function(e){var t=JSON.parse(e.responseText);showAlert(t.msg,"danger")}).always(function(){n.text(n.data("text-default"))})})}),e(".js-table").length&&initDatatable({table:".js-table",filter:".js-table-filter",search:{form:".js-table-search-form",input:".js-table-search-input"},pagination:{basic:".pagination-basic",table:".pagination-table"},columns:[{data:"id",className:"text-center",render:function(e,t,a){return'<a href="/users/edit/'+e+'">'+e+"</a>"}},{data:"states",className:"text-center"},{data:"first_name",className:"text-center"},{data:"last_name",className:"text-center"},{data:"role",className:"text-center"},{data:"mfa",className:"text-center"},{data:"last_login",className:"text-center"},{data:"email",className:"text-center"}]}),e('[name="states[]"]').on("change",function(t){t.preventDefault();var a=e(this).val(),n=e('[name="dioceses[]"]');a.includes("national")?(n.find("option").prop("disabled",!1),n.find("option").prop("selected",!0)):(n.find("option").prop("disabled",!0),n.find("option").prop("selected",!1),e.each(a,function(e,t){n.find('optgroup[label="'+t.toUpperCase()+'"]').find("option").prop("selected",!0),n.find('optgroup[label="'+t.toUpperCase()+'"]').find("option").prop("disabled",!1)})),n.select2(),s()}),e("#dioceses").on("change",function(e){s()}),window.location.pathname.split("/").includes("edit")){var i=e('[name="states[]"]').val(),r=e('[name="dioceses[]"]').val(),l=e('[name="dioceses[]"]');i.includes("national")?(l.find("option").prop("disabled",!1),l.find("option").prop("selected",!1),e.each(r,function(e,t){l.find('option[value="'+t+'"]').prop("selected",!0)})):(l.find("option").prop("disabled",!0),l.find("option").prop("selected",!1),e.each(i,function(t,a){e.each(r,function(e,t){l.find('optgroup[label="'+a.toUpperCase()+'"]').find('option[value="'+t+'"]').prop("selected",!0)}),l.find('optgroup[label="'+a.toUpperCase()+'"]').find("option").prop("disabled",!1)})),l.select2(),s()}e(document).on("click","#getActivity",function(t){t.preventDefault();var a=e(this).data("url");e(".message-modal").html(""),e("#modal-loader").show(),e.ajax({url:a,type:"GET",dataType:"html"}).done(function(t){e(".message-modal").html(""),e(".message-modal").html(t),e("#modal-loader").hide()}).fail(function(){e("#dynamic-content").html('<i class="glyphicon glyphicon-info-sign"></i> Something went wrong, Please try again...'),e("#modal-loader").hide()})})})}(jQuery);
//# sourceMappingURL=user.min.js.map

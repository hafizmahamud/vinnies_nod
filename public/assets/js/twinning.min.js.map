{"version":3,"sources":["twinning.js"],"names":["$","document","ready","length","initDatatable","table","filter","search","form","input","pagination","basic","columns","data","className","render","type","row","local_conference_id","overseas_conference_id","on","initForm","btn","beforeSubmitCb","find","empty","hide","successCb","responseText","statusText","xhr","$form","updateBindings","$p1","$p2","val","attr","closest","append","each","this","toggleClass","modal","e","preventDefault","formData","filters","local_conference_state","local_conference_diocesan_council_id","local_conferences_regional_council","overseas_conferences_central_council","overseas_conferences_particular_council","overseas_conference_country_id","overseas_conference_is_active","is_active","period","national_council","value","window","location","twinning_export_url","param","jQuery"],"mappings":"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","file":"twinning.min.js","sourcesContent":["/* global updateBindings */\r\n/* global twinning_export_url */\r\n/* global initDatatable */\r\n/* global initForm */\r\n\r\n'use strict';\r\n\r\n(function ($) {\r\n    $(document).ready(function () {\r\n        if ($('.js-table').length) {\r\n            initDatatable({\r\n                table: '.js-table',\r\n                filter: '.js-table-filter',\r\n                search: {\r\n                    form: '.js-table-search-form',\r\n                    input: '.js-table-search-input',\r\n                },\r\n                pagination: {\r\n                    basic: '.pagination-basic',\r\n                    table: '.pagination-table',\r\n                },\r\n                columns: [\r\n                    {\r\n                        data: 'id',\r\n                        className: 'text-center',\r\n                        render: function (data, type, row) {\r\n                            return '<a href=\"/twinnings/edit/' + data + '\">' + data + '</a>';\r\n                        },\r\n                    },\r\n                    {\r\n                        data: 'is_active',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'local_conference_id',\r\n                        className: 'text-center',\r\n                        render: function(data, type, row) {\r\n                            return '<a href=\"/local-conferences/edit/' + row.local_conference_id + '\">' + data + '</a>';\r\n                        },\r\n                    },\r\n                    {\r\n                        data: 'local_conference_name',\r\n                        className: 'text-center',\r\n                        render: function(data, type, row) {\r\n                            return '<a href=\"/local-conferences/edit/' + row.local_conference_id + '\">' + data + '</a>';\r\n                        },\r\n                    },\r\n                    {\r\n                        data: 'local_conference_parish',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'local_conference_state',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'overseas_conference_id',\r\n                        className: 'text-center',\r\n                        render: function(data, type, row) {\r\n                            return '<a href=\"/overseas-conferences/edit/' + row.overseas_conference_id + '\">' + data + '</a>';\r\n                        },\r\n                    },\r\n                    {\r\n                        data: 'overseas_conference_name',\r\n                        className: 'text-center',\r\n                        render: function(data, type, row) {\r\n                            return '<a href=\"/overseas-conferences/edit/' + row.overseas_conference_id + '\">' + data + '</a>';\r\n                        },\r\n                    },\r\n                    {\r\n                        data: 'overseas_conference_parish',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'overseas_conference_country',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'overseas_conference_is_active',\r\n                        className: 'text-center',\r\n                    },\r\n                ]\r\n            });\r\n        }\r\n\r\n        $('#modal-os-conf').on('shown.bs.modal', function () {\r\n            initDatatable({\r\n                table: '#modal-os-conf .js-modal-table',\r\n                filter: '#modal-os-conf .js-modal-table-filter',\r\n                search: {\r\n                    form: '#modal-os-conf .js-table-search-form',\r\n                    input: '#modal-os-conf .js-table-search-input',\r\n                },\r\n                pagination: {\r\n                    basic: '#modal-os-conf .pagination-basic',\r\n                    table: '',\r\n                },\r\n                columns: [\r\n                    {\r\n                        data: 'select',\r\n                        className: 'text-center',\r\n                        render: function (data, type, row) {\r\n                            return '<div class=\"checkbox checkbox-warning\"><input type=\"checkbox\" name=\"overseas_conference_id\" value=\"' + data + '\"><label></label></div>';\r\n                        },\r\n                    },\r\n                    {\r\n                        data: 'id',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'name',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'country',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'central_council',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'particular_council',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'parish',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'is_active',\r\n                        className: 'text-center',\r\n                    },\r\n                ]\r\n            });\r\n\r\n            initForm({\r\n                form: '#modal-os-conf .js-modal-form',\r\n                btn: '#modal-os-conf .btn-submit-modal-form',\r\n                beforeSubmitCb: function () {\r\n                    $('#modal-os-conf .js-modal-form').find('[data-error]').empty().hide();\r\n                },\r\n                successCb: function (responseText, statusText, xhr, $form) {\r\n                    updateBindings(responseText, function (data) {\r\n                        var $p1 = $('[data-bind=\"overseas_conference_id\"]');\r\n                        var $p2 = $('[data-bind=\"overseas_conference_name\"]');\r\n\r\n                        if (data.overseas_conference_id === 'N/A') {\r\n                            $('.js-form [name=\"overseas_conference_id\"]').val('');\r\n                            $('#modal-os-conf .js-modal-table').attr('data-selected-id', '');\r\n                            $p1.closest('p').append($p1);\r\n                            $p2.closest('p').append($p2);\r\n                        } else {\r\n                            $('.js-form [name=\"overseas_conference_id\"]').val(data.overseas_conference_id);\r\n                            $('#modal-os-conf .js-modal-table').attr('data-selected-id', data.overseas_conference_id);\r\n                            $p1.closest('p').find('a').append($p1);\r\n                            $p2.closest('p').find('a').append($p2);\r\n                        }\r\n\r\n                        $('.row-os-conf p').each(function () {\r\n                            var $this = $(this);\r\n                            $this.toggleClass('text-muted', (data.overseas_conference_id === 'N/A'));\r\n                        });\r\n\r\n                        $('#modal-os-conf').modal('hide');\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        $('#modal-local-conf').on('shown.bs.modal', function () {\r\n            initDatatable({\r\n                table: '#modal-local-conf .js-modal-table',\r\n                filter: '#modal-local-conf .js-modal-table-filter',\r\n                search: {\r\n                    form: '#modal-local-conf .js-table-search-form',\r\n                    input: '#modal-local-conf .js-table-search-input',\r\n                },\r\n                pagination: {\r\n                    basic: '#modal-local-conf .pagination-basic',\r\n                    table: '',\r\n                },\r\n                columns: [\r\n                    {\r\n                        data: 'select',\r\n                        className: 'text-center',\r\n                        render: function (data, type, row) {\r\n                            return '<div class=\"checkbox checkbox-warning\"><input type=\"checkbox\" name=\"local_conference_id\" value=\"' + data + '\"><label></label></div>';\r\n                        },\r\n                    },\r\n                    {\r\n                        data: 'id',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'name',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'state',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'regional_council',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'diocesan_council_id',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'parish',\r\n                        className: 'text-center',\r\n                    },\r\n                ]\r\n            });\r\n\r\n            initForm({\r\n                form: '#modal-local-conf .js-modal-form',\r\n                btn: '#modal-local-conf .btn-submit-modal-form',\r\n                beforeSubmitCb: function () {\r\n                    $('#modal-local-conf .js-modal-form').find('[data-error]').empty().hide();\r\n                },\r\n                successCb: function (responseText, statusText, xhr, $form) {\r\n                    updateBindings(responseText, function (data) {\r\n                        var $p1 = $('[data-bind=\"local_conference_id\"]');\r\n                        var $p2 = $('[data-bind=\"local_conference_name\"]');\r\n\r\n                        if (data.local_conference_id === 'N/A') {\r\n                            $('.js-form [name=\"local_conference_id\"]').val('');\r\n                            $('#modal-local-conf .js-modal-table').attr('data-selected-id', '');\r\n                            $p1.closest('p').append($p1);\r\n                            $p2.closest('p').append($p2);\r\n                        } else {\r\n                            $('.js-form [name=\"local_conference_id\"]').val(data.local_conference_id);\r\n                            $('#modal-local-conf .js-modal-table').attr('data-selected-id', data.local_conference_id);\r\n                            $p1.closest('p').find('a').append($p1);\r\n                            $p2.closest('p').find('a').append($p2);\r\n                        }\r\n\r\n                        $('.row-local-conf p').each(function () {\r\n                            var $this = $(this);\r\n                            $this.toggleClass('text-muted', (data.local_conference_id === 'N/A'));\r\n                        });\r\n\r\n                        $('#modal-local-conf').modal('hide');\r\n                    });\r\n                }\r\n            });\r\n        });\r\n\r\n        $(document).on('click', '.js-btn-export-twinnings', function (e) {\r\n            e.preventDefault();\r\n\r\n            var formData = {\r\n                filters: {\r\n                    local_conference_state: $('[name=\"local_conference_state\"]').find('option:selected').val(),\r\n                    local_conference_diocesan_council_id: $('[name=\"local_conference_diocesan_council_id\"]').find('option:selected').val(),\r\n                    local_conferences_regional_council: $('[name=\"local_conferences_regional_council\"]').val(),\r\n                    overseas_conferences_central_council: $('[name=\"overseas_conferences_central_council\"]').val(),\r\n                    overseas_conferences_particular_council: $('[name=\"overseas_conferences_particular_council\"]').val(),\r\n                    overseas_conference_country_id: $('[name=\"overseas_conference_country_id\"]').find('option:selected').val(),\r\n                    overseas_conference_is_active: $('[name=\"overseas_conference_is_active\"]').find('option:selected').val(),\r\n                    is_active: $('[name=\"is_active\"]').find('option:selected').val(),\r\n                    period: $('[name=\"period\"]').find('option:selected').val(),\r\n                    national_council: $('[name=\"national_council\"]').find('option:selected').val(),\r\n                    type: $('[name=\"type\"]').find('option:selected').val(),\r\n                },\r\n                search: {\r\n                    value: $('.js-table-search-input').val(),\r\n                }\r\n            };\r\n\r\n            window.location = twinning_export_url + '?' + $.param(formData);\r\n        });\r\n    });\r\n})(jQuery);\r\n"]}
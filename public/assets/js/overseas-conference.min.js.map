{"version":3,"sources":["overseas-conference.js"],"names":["$","document","ready","length","initDatatable","table","filter","search","form","input","pagination","basic","columns","data","className","render","type","row","dirty","on","e","$this","this","preventDefault","bootbox","dialog","message","buttons","cancel","label","callback","discard","window","location","attr","save","text","ajaxSubmit","formData","filters","country","find","val","is_active","is_in_status_check","status_check_initiated_at","is_in_surrendering","surrendering_initiated_at","surrendering_deadline_at","reason_status_check","twinning_status","twinning_state","central_council","particular_council","national_council","status","value","osconf_export_url","param","jQuery"],"mappings":"AAMA,cAEA,SAAWA,GAEPA,EAAEC,UAAUC,MAAM,WACVF,EAAE,aAAaG,QACfC,eACIC,MAAO,YACPC,OAAQ,mBACRC,QACIC,KAAM,wBACNC,MAAO,0BAEXC,YACIC,MAAO,oBACPN,MAAO,qBAEXO,UAEQC,KAAM,KACNC,UAAW,cACXC,OAAQ,SAAUF,EAAMG,EAAMC,GAC1B,MAAO,uCAAyCJ,EAAO,KAAOA,EAAO,UAIzEA,KAAM,OACNC,UAAW,gBAGXD,KAAM,SACNC,UAAW,gBAGXD,KAAM,SACNC,UAAW,gBAGXD,KAAM,UACNC,UAAW,gBAGXD,KAAM,kBACNC,UAAW,gBAGXD,KAAM,qBACNC,UAAW,gBAGXD,KAAM,kBACNC,UAAW,gBAGXD,KAAM,YACNC,UAAW,kBAMvBd,EAAE,sBAAsBG,SACxBH,EAAE,sBAAsBkB,QAExBlB,EAAE,wBAAwBmB,GAAG,QAAS,SAAUC,GAC5C,GAAIC,GAAQrB,EAAEsB,KAEVtB,GAAE,sBAAsBkB,MAAM,aAC9BE,EAAEG,iBAEFC,QAAQC,QACJC,QAAS,oMACTC,SACIC,QACIC,MAAO,oBACPf,UAAW,cACXgB,SAAU,cAIdC,SACIF,MAAO,kBACPf,UAAW,aACXgB,SAAU,WACNE,OAAOC,SAAWZ,EAAMa,KAAK,UAGrCC,MACIN,MAAO,eACPf,UAAW,cACXgB,SAAU,WAWN,MAVA9B,GAAE,4BAA4BoC,KAAK,aAEnCpC,EAAE,YAAYqC,WAAW,WACrBrC,EAAE,4BAA4BoC,KAAK,kBAEnCJ,OAAOC,SAAWZ,EAAMa,KAAK,UAGjClC,EAAE,4BAA4BoC,KAAK,iBAE5B,WASnCpC,EAAEC,UAAUkB,GAAG,QAAS,yBAA0B,SAAUC,GACxDA,EAAEG,gBAEF,IAAIe,IACAC,SACIC,QAASxC,EAAE,oBAAoByC,KAAK,mBAAmBC,MACvDC,UAAW3C,EAAE,sBAAsByC,KAAK,mBAAmBC,MAC3DE,mBAAoB5C,EAAE,+BAA+ByC,KAAK,mBAAmBC,MAC7EG,0BAA2B7C,EAAE,sCAAsCyC,KAAK,mBAAmBC,MAC3FI,mBAAoB9C,EAAE,+BAA+ByC,KAAK,mBAAmBC,MAC7EK,0BAA2B/C,EAAE,sCAAsCyC,KAAK,mBAAmBC,MAC3FM,yBAA0BhD,EAAE,qCAAqCyC,KAAK,mBAAmBC,MACzFO,oBAAqBjD,EAAE,gCAAgCyC,KAAK,mBAAmBC,MAC/EQ,gBAAiBlD,EAAE,4BAA4ByC,KAAK,mBAAmBC,MACvES,eAAgBnD,EAAE,2BAA2ByC,KAAK,mBAAmBC,MACrEU,gBAAiBpD,EAAE,4BAA4B0C,MAC/CW,mBAAoBrD,EAAE,+BAA+B0C,MACrDY,iBAAkBtD,EAAE,6BAA6ByC,KAAK,mBAAmBC,MACzEa,OAAQvD,EAAE,mBAAmByC,KAAK,mBAAmBC,OAEzDnC,QACIiD,MAAOxD,EAAE,0BAA0B0C,OAI3CV,QAAOC,SAAWwB,kBAAoB,IAAMzD,EAAE0D,MAAMpB,QAG7DqB","file":"overseas-conference.min.js","sourcesContent":["/* global has_invalid_diocesan_council */\r\n/* global invalid_diocesan_council_id */\r\n/* global bootbox */\r\n/* global initDatatable */\r\n/* global osconf_export_url */\r\n\r\n'use strict';\r\n\r\n(function ($) {\r\n\r\n    $(document).ready(function () {\r\n        if ($('.js-table').length) {\r\n            initDatatable({\r\n                table: '.js-table',\r\n                filter: '.js-table-filter',\r\n                search: {\r\n                    form: '.js-table-search-form',\r\n                    input: '.js-table-search-input',\r\n                },\r\n                pagination: {\r\n                    basic: '.pagination-basic',\r\n                    table: '.pagination-table',\r\n                },\r\n                columns: [\r\n                    {\r\n                        data: 'id',\r\n                        className: 'text-center',\r\n                        render: function (data, type, row) {\r\n                            return '<a href=\"/overseas-conferences/edit/' + data + '\">' + data + '</a>';\r\n                        },\r\n                    },\r\n                    {\r\n                        data: 'name',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'parish',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'status',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'country',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'central_council',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'particular_council',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'twinning_status',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'is_active',\r\n                        className: 'text-center',\r\n                    },\r\n                ]\r\n            });\r\n        }\r\n\r\n        if ($('.form-edit-os-conf').length) {\r\n            $('.form-edit-os-conf').dirty();\r\n\r\n            $('.js-btn-add-twinning').on('click', function (e) {\r\n                var $this = $(this);\r\n\r\n                if ($('.form-edit-os-conf').dirty('isDirty')) {\r\n                    e.preventDefault();\r\n\r\n                    bootbox.dialog({\r\n                        message: 'You might have unsaved changes for the Overseas Conference you are trying to add a twin. Would you like to save the changes, discard changes or Cancel and take time to review the modifications?',\r\n                        buttons: {\r\n                            cancel: {\r\n                                label: 'Cancel and Review',\r\n                                className: 'btn-warning',\r\n                                callback: function() {\r\n                                    // do nothing\r\n                                }\r\n                            },\r\n                            discard: {\r\n                                label: 'Discard Changes',\r\n                                className: 'btn-danger',\r\n                                callback: function() {\r\n                                    window.location = $this.attr('href');\r\n                                }\r\n                            },\r\n                            save: {\r\n                                label: 'Save Changes',\r\n                                className: 'btn-primary',\r\n                                callback: function() {\r\n                                    $('[data-bb-handler=\"save\"]').text('Saving...');\r\n\r\n                                    $('.js-form').ajaxSubmit(function () {\r\n                                        $('[data-bb-handler=\"save\"]').text('Redirecting...');\r\n\r\n                                        window.location = $this.attr('href');\r\n                                    });\r\n\r\n                                    $('[data-bb-handler=\"save\"]').text('Save Changes');\r\n\r\n                                    return false; // dont close the modal\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        $(document).on('click', '.js-btn-export-os-conf', function (e) {\r\n            e.preventDefault();\r\n\r\n            var formData = {\r\n                filters: {\r\n                    country: $('[name=\"country\"]').find('option:selected').val(),\r\n                    is_active: $('[name=\"is_active\"]').find('option:selected').val(),\r\n                    is_in_status_check: $('[name=\"is_in_status_check\"]').find('option:selected').val(),\r\n                    status_check_initiated_at: $('[name=\"status_check_initiated_at\"]').find('option:selected').val(),\r\n                    is_in_surrendering: $('[name=\"is_in_surrendering\"]').find('option:selected').val(),\r\n                    surrendering_initiated_at: $('[name=\"surrendering_initiated_at\"]').find('option:selected').val(),\r\n                    surrendering_deadline_at: $('[name=\"surrendering_deadline_at\"]').find('option:selected').val(),\r\n                    reason_status_check: $('[name=\"reason_status_check\"]').find('option:selected').val(),\r\n                    twinning_status: $('[name=\"twinning_status\"]').find('option:selected').val(),\r\n                    twinning_state: $('[name=\"twinning_state\"]').find('option:selected').val(),\r\n                    central_council: $('[name=\"central_council\"]').val(),\r\n                    particular_council: $('[name=\"particular_council\"]').val(),\r\n                    national_council: $('[name=\"national_council\"]').find('option:selected').val(),\r\n                    status: $('[name=\"status\"]').find('option:selected').val(),\r\n                },\r\n                search: {\r\n                    value: $('.js-table-search-input').val(),\r\n                }\r\n            };\r\n\r\n            window.location = osconf_export_url + '?' + $.param(formData);\r\n        });\r\n    });\r\n})(jQuery);\r\n"]}
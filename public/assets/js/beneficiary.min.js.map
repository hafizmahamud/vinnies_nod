{"version":3,"sources":["beneficiary.js"],"names":["$","$btnDelete","$btnRestore","document","ready","length","initDatatable","table","filter","search","form","input","pagination","basic","columns","data","className","render","type","row","on","e","preventDefault","message","val","showDialog","beneficiary","text","post","resp","showAlert","msg","updateUpdatedBy","setTimeout","window","location","reload","fail","xhr","JSON","parse","responseText","always","jQuery"],"mappings":"AAKA,cAEA,SAAWA,GACP,GAAIC,GAAcD,EAAE,8BAChBE,EAAcF,EAAE,8BAEpBA,GAAEG,UAAUC,MAAM,WACVJ,EAAE,aAAaK,QACfC,eACIC,MAAO,YACPC,OAAQ,mBACRC,QACIC,KAAM,wBACNC,MAAO,0BAEXC,YACIC,MAAO,oBACPN,MAAO,qBAEXO,UAEQC,KAAM,KACNC,UAAW,cACXC,OAAQ,SAAUF,EAAMG,EAAMC,GAC1B,MAAO,gCAAkCJ,EAAO,KAAOA,EAAO,UAIlEA,KAAM,OACNC,UAAW,gBAGXD,KAAM,UACNC,UAAW,gBAGXD,KAAM,gBACNC,UAAW,gBAGXD,KAAM,qBACNC,UAAW,gBAGXD,KAAM,oBACNC,UAAW,gBAGXD,KAAM,QACNC,UAAW,gBAGXD,KAAM,SACNC,UAAW,kBAM3Bf,EAAWmB,GAAG,QAAS,SAAUC,GAC7BA,EAAEC,gBAEF,IAAIC,GAAU,sCAAwCvB,EAAE,SAASwB,MAAQ,OAEzEC,YAAWF,GAAS,EAAM,WACtB,GAAIR,IACAW,YAAazB,EAAWc,KAAK,kBAGjCd,GAAW0B,KAAK1B,EAAWc,KAAK,kBAEhCf,EAAE4B,KAAK,wBAAyBb,EAAM,SAAUc,GAC5CC,UAAUD,EAAKE,IAAK,WACpBC,kBAEAC,WAAW,WACPC,OAAOC,SAASC,UACjB,OACJC,KAAK,SAAUC,GACd,GAAIT,GAAOU,KAAKC,MAAMF,EAAIG,aAC1BX,WAAUD,EAAKE,IAAK,YACrBW,OAAO,WACNzC,EAAW0B,KAAK1B,EAAWc,KAAK,uBAK5Cb,EAAYkB,GAAG,QAAS,SAAUC,GAC9BA,EAAEC,gBAEF,IAAIC,GAAU,uCAAyCvB,EAAE,SAASwB,MAAQ,OAE1EC,YAAWF,GAAS,EAAM,WACtB,GAAIR,IACAW,YAAaxB,EAAYa,KAAK,kBAGlCb,GAAYyB,KAAKzB,EAAYa,KAAK,kBAElCf,EAAE4B,KAAK,yBAA0Bb,EAAM,SAAUc,GAC7CC,UAAUD,EAAKE,IAAK,WACpBC,kBAEAC,WAAW,WACPC,OAAOC,SAASC,UACjB,OACJC,KAAK,SAAUC,GACd,GAAIT,GAAOU,KAAKC,MAAMF,EAAIG,aAC1BX,WAAUD,EAAKE,IAAK,YACrBW,OAAO,WACNxC,EAAYyB,KAAKzB,EAAYa,KAAK,0BAKnD4B","file":"beneficiary.min.js","sourcesContent":["/* global initDatatable */\r\n/* global showAlert */\r\n/* global showDialog */\r\n/* global updateUpdatedBy */\r\n\r\n'use strict';\r\n\r\n(function ($) {\r\n    var $btnDelete  = $('.js-btn-beneficiary-delete');\r\n    var $btnRestore = $('.js-btn-beneficiary-restore');\r\n\r\n    $(document).ready(function () {\r\n        if ($('.js-table').length) {\r\n            initDatatable({\r\n                table: '.js-table',\r\n                filter: '.js-table-filter',\r\n                search: {\r\n                    form: '.js-table-search-form',\r\n                    input: '.js-table-search-input',\r\n                },\r\n                pagination: {\r\n                    basic: '.pagination-basic',\r\n                    table: '.pagination-table',\r\n                },\r\n                columns: [\r\n                    {\r\n                        data: 'id',\r\n                        className: 'text-center',\r\n                        render: function (data, type, row) {\r\n                            return '<a href=\"/beneficiaries/edit/' + data + '\">' + data + '</a>';\r\n                        },\r\n                    },\r\n                    {\r\n                        data: 'name',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'country',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'contact_title',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'contact_first_name',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'contact_last_name',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'email',\r\n                        className: 'text-center',\r\n                    },\r\n                    {\r\n                        data: 'status',\r\n                        className: 'text-center',\r\n                    },\r\n                ]\r\n            });\r\n        }\r\n\r\n        $btnDelete.on('click', function (e) {\r\n            e.preventDefault();\r\n\r\n            var message = '<p>Are you sure you want to delete ' + $('#name').val() + '?</p>';\r\n\r\n            showDialog(message, true, function () {\r\n                var data = {\r\n                    beneficiary: $btnDelete.data('beneficiary-id')\r\n                };\r\n\r\n                $btnDelete.text($btnDelete.data('text-progress'));\r\n\r\n                $.post('/beneficiaries/delete', data, function (resp) {\r\n                    showAlert(resp.msg, 'success');\r\n                    updateUpdatedBy();\r\n\r\n                    setTimeout(function () {\r\n                        window.location.reload();\r\n                    }, 1000);\r\n                }).fail(function (xhr) {\r\n                    var resp = JSON.parse(xhr.responseText);\r\n                    showAlert(resp.msg, 'danger');\r\n                }).always(function () {\r\n                    $btnDelete.text($btnDelete.data('text-default'));\r\n                });\r\n            });\r\n        });\r\n\r\n        $btnRestore.on('click', function (e) {\r\n            e.preventDefault();\r\n\r\n            var message = '<p>Are you sure you want to restore ' + $('#name').val() + '?</p>';\r\n\r\n            showDialog(message, true, function () {\r\n                var data = {\r\n                    beneficiary: $btnRestore.data('beneficiary-id')\r\n                };\r\n\r\n                $btnRestore.text($btnRestore.data('text-progress'));\r\n\r\n                $.post('/beneficiaries/restore', data, function (resp) {\r\n                    showAlert(resp.msg, 'success');\r\n                    updateUpdatedBy();\r\n\r\n                    setTimeout(function () {\r\n                        window.location.reload();\r\n                    }, 1000);\r\n                }).fail(function (xhr) {\r\n                    var resp = JSON.parse(xhr.responseText);\r\n                    showAlert(resp.msg, 'danger');\r\n                }).always(function () {\r\n                    $btnRestore.text($btnRestore.data('text-default'));\r\n                });\r\n            });\r\n        });\r\n    });\r\n})(jQuery);\r\n"]}